<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ agent.name }} - Agent Transfer Viewer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for markdown content */
    </style>
</head>
<body class="flex h-screen overflow-hidden bg-gray-50">
    <!-- Sidebar -->
    <div class="w-80 bg-gray-900 text-gray-100 overflow-y-auto p-5 border-r border-gray-700">
        <h1 class="text-xl font-bold mb-5 text-white border-b-2 border-gray-700 pb-3">
            <a href="/" class="text-white no-underline">ðŸ¤– Agent Transfer</a>
        </h1>
        
        {% if user_agents %}
        <h2 class="text-xs uppercase text-gray-400 mt-5 mb-3 font-semibold tracking-wide">
            User Agents ({{ user_agents|length }})
        </h2>
        <ul class="space-y-1">
            {% for a in user_agents %}
            <li>
                <a href="/agent/{{ a.name }}" class="block px-3 py-2 text-gray-300 rounded-lg transition-all hover:bg-gray-800 hover:text-white text-sm {% if a.name == agent.name %}bg-blue-600 text-white{% endif %}">
                    <span class="font-semibold block">{{ a.name }}</span>
                    <span class="text-xs text-gray-400 mt-1 line-clamp-2">{{ a.description|replace('\\n', ' ') if a.description else '' }}</span>
                </a>
            </li>
            {% endfor %}
        </ul>
        {% endif %}
        
        {% if project_agents %}
        <h2 class="text-xs uppercase text-gray-400 mt-5 mb-3 font-semibold tracking-wide">
            Project Agents ({{ project_agents|length }})
        </h2>
        <ul class="space-y-1">
            {% for a in project_agents %}
            <li>
                <a href="/agent/{{ a.name }}" class="block px-3 py-2 text-gray-300 rounded-lg transition-all hover:bg-gray-800 hover:text-white text-sm {% if a.name == agent.name %}bg-blue-600 text-white{% endif %}">
                    <span class="font-semibold block">{{ a.name }}</span>
                    <span class="text-xs text-gray-400 mt-1 line-clamp-2">{{ a.description|replace('\\n', ' ') if a.description else '' }}</span>
                </a>
            </li>
            {% endfor %}
        </ul>
        {% endif %}
    </div>
    
    <!-- Main Content -->
    <div class="flex-1 overflow-y-auto p-10 bg-white">
        <div class="max-w-4xl mx-auto">
            <!-- Agent Header -->
            <div class="border-b border-gray-200 pb-5 mb-8">
                <h1 class="text-4xl font-bold text-gray-900 mb-3">{{ agent.name }}</h1>
                <p class="text-lg text-gray-600 mb-4 whitespace-pre-line">{{ agent.description|replace('\\n', '\n') if agent.description else 'No description available' }}</p>
                
                <div class="flex flex-wrap gap-3 mt-4">
                    <span class="px-3 py-1 rounded-full text-xs font-semibold {% if agent.agent_type == 'user' %}bg-green-100 text-green-800{% else %}bg-blue-100 text-blue-800{% endif %}">
                        {{ agent.agent_type|title }} Agent
                    </span>
                    {% if agent.tools %}
                    <span class="px-3 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-700">
                        Tools: {{ agent.tools|length }}
                    </span>
                    {% endif %}
                    {% if agent.model %}
                    <span class="px-3 py-1 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800">
                        Model: {{ agent.model }}
                    </span>
                    {% endif %}
                </div>
                
                <div class="mt-4 text-sm text-gray-600 space-y-1">
                    <div><strong>File:</strong> <code class="bg-gray-100 px-2 py-1 rounded text-xs">{{ agent.file_path }}</code></div>
                    {% if agent.tools %}
                    <div><strong>Tools:</strong> {{ agent.tools|join(", ") }}</div>
                    {% endif %}
                </div>
            </div>
            
            <!-- Agent Content -->
            <div class="agent-content-body">
                {{ html_content|safe }}
            </div>
        </div>
    </div>
</body>
</html>
